<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viego: The Ruined King RPG</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap');

        :root {
            --ruined-green: #0ac8b9;
            --dark-bg: #05080a;
            --mana-blue: #0070dd;
            --hp-red: #c0392b;
        }

        body {
            background-color: var(--dark-bg);
            /* Arka plan: KaranlÄ±k sisli bir atmosfer */
            background-image: linear-gradient(rgba(0,0,0,0.8), rgba(0,20,20,0.9)), url('https://ddragon.leagueoflegends.com/cdn/img/champion/splash/Viego_0.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #e0e0e0;
            font-family: 'Cinzel', serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            user-select: none;
        }

        /* Sis Efekti (Animasyon) */
        @keyframes mist {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .mist-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(45deg, rgba(10, 200, 185, 0.05), transparent);
            background-size: 400% 400%;
            animation: mist 15s ease infinite;
            z-index: -1;
            pointer-events: none;
        }

        /* UI Panelleri */
        .game-wrapper {
            width: 90%;
            max-width: 1000px;
            background: rgba(10, 12, 15, 0.95);
            border: 2px solid #333;
            border-top: 4px solid var(--ruined-green);
            box-shadow: 0 0 50px rgba(10, 200, 185, 0.1);
            padding: 20px;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 600px;
        }

        /* BaÅŸlangÄ±Ã§ EkranÄ± */
        #start-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        #start-screen h1 { font-size: 3rem; color: var(--ruined-green); text-shadow: 0 0 20px var(--ruined-green); margin-bottom: 10px; }
        .start-btn {
            padding: 15px 40px;
            font-size: 1.5rem;
            background: transparent;
            color: var(--ruined-green);
            border: 2px solid var(--ruined-green);
            font-family: 'Cinzel', serif;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 30px;
        }
        .start-btn:hover { background: var(--ruined-green); color: black; box-shadow: 0 0 30px var(--ruined-green); }

        /* SavaÅŸ AlanÄ± */
        .battle-scene {
            flex-grow: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
        }

        .character-box {
            width: 250px;
            text-align: center;
            position: relative;
        }
        .character-img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid #444;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            transition: transform 0.2s;
        }
        .viego-glow { border-color: var(--ruined-green); box-shadow: 0 0 30px rgba(10, 200, 185, 0.3); }
        .enemy-glow { border-color: #d63031; box-shadow: 0 0 30px rgba(214, 48, 49, 0.3); }
        
        /* Hasar Animasyonu */
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        /* Bar Stilleri */
        .stat-bar {
            width: 100%;
            height: 15px;
            background: #222;
            margin-top: 8px;
            border: 1px solid #444;
            position: relative;
        }
        .fill { height: 100%; transition: width 0.5s ease-out; }
        .hp-fill { background-color: var(--hp-red); }
        .mana-fill { background-color: var(--mana-blue); }
        .bar-text { font-size: 12px; position: absolute; width: 100%; text-align: center; top: -2px; text-shadow: 1px 1px 2px black; }

        /* Kontrol Paneli */
        .controls {
            height: 150px;
            border-top: 1px solid #444;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            padding-top: 20px;
        }

        .skills {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 10px;
        }

        .skill-btn {
            background: #111;
            border: 1px solid #444;
            color: #aaa;
            font-family: 'Cinzel', serif;
            cursor: pointer;
            position: relative;
            transition: 0.2s;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 5px;
        }
        .skill-btn:hover:not(:disabled) { border-color: var(--ruined-green); color: white; background: #1a1a1a; }
        .skill-btn:disabled { opacity: 0.4; cursor: not-allowed; }
        .skill-name { font-weight: bold; font-size: 0.9rem; }
        .skill-cost { font-size: 0.7rem; color: var(--mana-blue); margin-top: 3px; }
        
        .ult-btn { border-color: var(--ruined-green); color: var(--ruined-green); }
        .ult-btn:hover:not(:disabled) { background: var(--ruined-green); color: black; }

        .log-box {
            background: rgba(0,0,0,0.5);
            border: 1px solid #333;
            padding: 10px;
            font-size: 0.9rem;
            overflow-y: auto;
            color: #ccc;
            font-family: sans-serif;
        }

        /* Overlay MesajlarÄ± */
        .overlay-msg {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            padding: 40px;
            border: 2px solid var(--ruined-green);
            text-align: center;
            display: none;
            z-index: 50;
        }
        .overlay-msg h2 { color: var(--ruined-green); font-size: 2rem; margin-bottom: 20px; }
        .overlay-msg p { font-style: italic; color: #fff; margin-bottom: 20px; font-size: 1.2rem; }

        /* Level GÃ¶stergesi */
        .level-badge {
            position: absolute;
            top: -10px; right: -10px;
            background: var(--ruined-green);
            color: black;
            width: 30px; height: 30px;
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-weight: bold;
            border: 2px solid white;
        }

        /* MÃ¼zik Butonu */
        .music-toggle {
            position: fixed;
            top: 20px; right: 20px;
            z-index: 200;
            background: rgba(0,0,0,0.5);
            color: white;
            border: 1px solid #555;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="mist-overlay"></div>
    <button class="music-toggle" onclick="toggleMusic()">ðŸŽµ MÃ¼zik</button>

    <audio id="bgMusic" loop>
        <audio id="bgMusic" loop>
    <source src="https://archive.org/download/deus_ex_mankind_divided_ost_extended/09%20Dark%20Days%20-%20Michael%20McCann.mp3" type="audio/mpeg">
</audio>
    </audio>

    <div class="game-wrapper">
        
        <div id="start-screen">
            <h1 style="color: #fff;">MAHVOLMUÅž KRAL'IN</h1>
            <h1>Ä°NTÄ°KAMI</h1>
            <p style="color: #aaa; margin-top: 10px;">"Hepsi... Onun iÃ§in."</p>
            <button class="start-btn" onclick="startGame()">HÄ°KAYEYE BAÅžLA</button>
        </div>

        <div id="overlay" class="overlay-msg">
            <h2 id="overlay-title">ZAFER</h2>
            <p id="overlay-quote">"..."</p>
            <div id="level-up-text" style="color: yellow; margin-bottom: 15px; display:none;">SEVÄ°YE ATLADIN!</div>
            <button class="start-btn" id="next-btn" onclick="nextLevel()">DEVAM ET</button>
        </div>

        <div class="battle-scene">
            <div class="character-box">
                <div class="level-badge" id="player-lvl">1</div>
                <img src="https://ddragon.leagueoflegends.com/cdn/img/champion/splash/Viego_0.jpg" class="character-img viego-glow" id="player-img">
                <h2 style="color: var(--ruined-green);">VIEGO</h2>
                
                <div class="stat-bar">
                    <div class="fill hp-fill" id="player-hp-bar" style="width: 100%;"></div>
                    <span class="bar-text" id="player-hp-text">100/100</span>
                </div>
                <div class="stat-bar">
                    <div class="fill mana-fill" id="player-mana-bar" style="width: 100%;"></div>
                    <span class="bar-text" id="player-mana-text">100/100</span>
                </div>
            </div>

            <h1 style="color: #555; font-size: 3rem;">VS</h1>

            <div class="character-box">
                <div class="level-badge" id="enemy-lvl" style="background: #d63031; color: white;">1</div>
                <img src="" class="character-img enemy-glow" id="enemy-img">
                <h2 style="color: #d63031;" id="enemy-name">DÃœÅžMAN</h2>
                
                <div class="stat-bar">
                    <div class="fill hp-fill" id="enemy-hp-bar" style="width: 100%;"></div>
                    <span class="bar-text" id="enemy-hp-text">100/100</span>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="skills">
                <button class="skill-btn" onclick="useSkill('basic')">
                    <span class="skill-name">KralÄ±n KÄ±lÄ±cÄ±</span>
                    <span class="skill-cost" style="color:#0f0;">+15 Mana</span>
                </button>
                
                <button class="skill-btn" onclick="useSkill('q')">
                    <span class="skill-name">MahvolmuÅŸ KralÄ±n KÄ±lÄ±cÄ± (Q)</span>
                    <span class="skill-cost">30 Mana</span>
                </button>

                <button class="skill-btn" onclick="useSkill('w')">
                    <span class="skill-name">HortlakÄ±n PenÃ§esi (W)</span>
                    <span class="skill-cost">50 Mana</span>
                </button>

                <button class="skill-btn ult-btn" id="btn-ult" onclick="useSkill('r')">
                    <span class="skill-name">KALP KIRAN (R)</span>
                    <span class="skill-cost">TÃœM MANA (1 KERE)</span>
                </button>
            </div>

            <div class="log-box" id="combat-log">
                SavaÅŸ baÅŸlÄ±yor... Isolde seni bekliyor.
            </div>
        </div>
    </div>

<script>
    // --- OYUN AYARLARI ---
    const player = {
        name: "Viego",
        level: 1,
        maxHp: 150,
        hp: 150,
        maxMana: 100,
        mana: 50, // BaÅŸlangÄ±Ã§ manasÄ±
        ultUsed: false
    };

    const enemies = [
        {
            name: "LeBlanc",
            level: 3,
            maxHp: 180,
            hp: 180,
            damage: 15,
            img: "https://ddragon.leagueoflegends.com/cdn/img/champion/splash/Leblanc_0.jpg",
            winQuote: "Viego: \"YalanlarÄ±n seni benim gazabÄ±mdan koruyamadÄ±, Hilekar.\""
        },
        {
            name: "Vladimir",
            level: 6,
            maxHp: 250,
            hp: 250,
            damage: 25,
            img: "https://ddragon.leagueoflegends.com/cdn/img/champion/splash/Vladimir_0.jpg",
            winQuote: "Viego: \"O pis kanÄ±n bile bana ait, amca.\""
        },
        {
            name: "Sahn-Uzal", // Mordekaiser
            level: 10,
            maxHp: 400,
            hp: 400,
            damage: 35,
            img: "https://ddragon.leagueoflegends.com/cdn/img/champion/splash/Mordekaiser_0.jpg",
            winQuote: "Viego: \"Ã–lÃ¼ler diyarÄ±nÄ±n tek bir kralÄ± var, o da BENÄ°M!\""
        }
    ];

    let currentEnemyIndex = 0;
    let turn = "player"; // player veya enemy
    const bgMusic = document.getElementById('bgMusic');

    // --- BAÅžLATMA ---
    function startGame() {
        document.getElementById('start-screen').style.display = 'none';
        bgMusic.volume = 0.4;
        bgMusic.play().catch(e => console.log("Otomatik oynatma engellendi"));
        loadLevel(0);
    }

    function toggleMusic() {
        if(bgMusic.paused) bgMusic.play();
        else bgMusic.pause();
    }

    function loadLevel(index) {
        currentEnemyIndex = index;
        const enemy = enemies[index];
        
        // DÃ¼ÅŸman UI GÃ¼ncelle
        document.getElementById('enemy-name').innerText = enemy.name.toUpperCase();
        document.getElementById('enemy-img').src = enemy.img;
        document.getElementById('enemy-lvl').innerText = enemy.level;
        
        // Resetler
        player.ultUsed = false;
        document.getElementById('btn-ult').disabled = false;
        document.getElementById('btn-ult').style.opacity = "1";
        
        updateUI();
        log(`Bir dÃ¼ÅŸman belirdi: ${enemy.name}!`);
        document.getElementById('overlay').style.display = 'none';
    }

    // --- SAVAÅž MEKANÄ°ÄžÄ° ---
    function useSkill(type) {
        if (turn !== "player") return; // SÄ±ra oyuncuda deÄŸilse dur

        const enemy = enemies[currentEnemyIndex];
        let damage = 0;
        let logMsg = "";
        let manaCost = 0;
        let manaGain = 0;

        // Skill MantÄ±ÄŸÄ±
        if (type === 'basic') {
            damage = 15 + (player.level * 5);
            manaGain = 15;
            logMsg = `Viego kÄ±lÄ±cÄ±nÄ± savurdu! ${damage} hasar. (+15 Mana)`;
        } 
        else if (type === 'q') {
            manaCost = 30;
            if (player.mana < manaCost) { log("Yetersiz Mana!"); return; }
            damage = 30 + (player.level * 8);
            logMsg = `Viego Q yeteneÄŸini kullandÄ±! ${damage} hasar.`;
        }
        else if (type === 'w') {
            manaCost = 50;
            if (player.mana < manaCost) { log("Yetersiz Mana!"); return; }
            damage = 50 + (player.level * 10);
            logMsg = `Viego sisi serbest bÄ±raktÄ±! ${damage} hasar.`;
        }
        else if (type === 'r') {
            if (player.ultUsed) { log("Ulti bu savaÅŸta zaten kullanÄ±ldÄ±!"); return; }
            if (player.mana <= 0) { log("Ulti iÃ§in hiÃ§ manan yok!"); return; }
            
            // Ulti mekaniÄŸi: ManayÄ± tÃ¼ket, manaya gÃ¶re hasar vur + base hasar
            let currentMana = player.mana;
            manaCost = currentMana; // Hepsini tÃ¼ket
            damage = 80 + (player.level * 10) + (currentMana * 1.5); // Mana bonusu
            
            player.ultUsed = true;
            document.getElementById('btn-ult').disabled = true;
            document.getElementById('btn-ult').style.opacity = "0.5";
            
            logMsg = `VIEGO KALBÄ°NÄ° KIRDI! TÃœM GÃœCÃœYLE VURDU! ${damage} HASAR!`;
        }

        // Oyuncu SaldÄ±rÄ±sÄ± Uygulama
        player.mana -= manaCost;
        player.mana += manaGain;
        if (player.mana > player.maxMana) player.mana = player.maxMana;

        enemy.hp -= damage;
        if (enemy.hp < 0) enemy.hp = 0;

        // Efekt
        shakeElement(document.getElementById('enemy-img'));
        updateUI();
        log(logMsg);

        // Kazanma KontrolÃ¼
        if (enemy.hp <= 0) {
            winBattle();
            return;
        }

        // SÄ±ra DÃ¼ÅŸmana GeÃ§er
        turn = "enemy";
        setTimeout(enemyTurn, 1000);
    }

    function enemyTurn() {
        const enemy = enemies[currentEnemyIndex];
        // DÃ¼ÅŸman basit yapay zeka: Rastgele hasar aralÄ±ÄŸÄ±
        let dmg = enemy.damage + Math.floor(Math.random() * 10);
        
        player.hp -= dmg;
        if (player.hp < 0) player.hp = 0;

        shakeElement(document.getElementById('player-img'));
        updateUI();
        log(`${enemy.name} saldÄ±rdÄ±! ${dmg} hasar aldÄ±n.`);

        // Kaybetme KontrolÃ¼
        if (player.hp <= 0) {
            log("Viego dÃ¼ÅŸtÃ¼... Isolde sonsuza dek kayboldu.");
            setTimeout(() => {
                alert("KAYBETTÄ°N. Sayfa yenileniyor...");
                location.reload();
            }, 1000);
            return;
        }

        turn = "player";
    }

    // --- SÄ°STEM FONKSÄ°YONLARI ---
    function winBattle() {
        const enemy = enemies[currentEnemyIndex];
        
        // Replik GÃ¶ster
        document.getElementById('overlay-title').innerText = "DÃœÅžMAN KATLEDÄ°LDÄ°";
        document.getElementById('overlay-quote').innerText = enemy.winQuote;
        
        // Level Up
        player.level++;
        player.maxHp += 50;
        player.hp = player.maxHp; // CanÄ± fulle
        player.maxMana += 20;
        player.mana = 50; // ManayÄ± sÄ±fÄ±rla/baÅŸlangÄ±ca Ã§ek
        
        document.getElementById('level-up-text').innerText = `SEVÄ°YE ATLADIN! (LVL ${player.level})`;
        document.getElementById('level-up-text').style.display = 'block';

        document.getElementById('overlay').style.display = 'block';
    }

    function nextLevel() {
        currentEnemyIndex++;
        if (currentEnemyIndex >= enemies.length) {
            alert("TEBRÄ°KLER! TÃœM DÃœÅžMANLARI YENDÄ°N. OYUN BÄ°TTÄ°.");
            location.reload();
        } else {
            loadLevel(currentEnemyIndex);
        }
    }

    function updateUI() {
        // Player BarlarÄ±
        const pHpPerc = (player.hp / player.maxHp) * 100;
        const pManaPerc = (player.mana / player.maxMana) * 100;
        document.getElementById('player-hp-bar').style.width = pHpPerc + '%';
        document.getElementById('player-hp-text').innerText = `${Math.floor(player.hp)}/${player.maxHp}`;
        document.getElementById('player-mana-bar').style.width = pManaPerc + '%';
        document.getElementById('player-mana-text').innerText = `${Math.floor(player.mana)}/${player.maxMana}`;
        document.getElementById('player-lvl').innerText = player.level;

        // Enemy BarlarÄ±
        const enemy = enemies[currentEnemyIndex];
        const eHpPerc = (enemy.hp / enemy.maxHp) * 100;
        document.getElementById('enemy-hp-bar').style.width = eHpPerc + '%';
        document.getElementById('enemy-hp-text').innerText = `${Math.floor(enemy.hp)}/${enemy.maxHp}`;
    }

    function log(msg) {
        const box = document.getElementById('combat-log');
        box.innerHTML = `> ${msg}<br>` + box.innerHTML;
    }

    function shakeElement(el) {
        el.classList.add('shake');
        setTimeout(() => el.classList.remove('shake'), 500);
    }
</script>

</body>
</html>
